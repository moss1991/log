# 计算机专业基础能力

* 数据结构
* 计算机组成原理
* 操作系统
* 计算机网络

# 通俗解释

## 思想类
* “没有银弹”：没有银色子弹的口语版本，两层意思，一是不同场景需要不同的方案和技术，二是没有万能的技术
* “少即是多”：懒是人性的本质，为了提高用户体验，系统要多做事和自动，用户操作要少和简单
* “UCD”：user center design = 用户为中心的设计思想，项目模型分为系统模型、业务模型、用户心理模型，设计的出发点是用户，这样的产品更容易推广使用
* “DDD”：domain driver design = 领域驱动设计，设计和实施系统前先了解、调研领域，归集领域知识，根据领域知识来一步步驱动软件设计

## 技术类
* “微服务”：相似功能、完成一件事的一些接口，打包成一个微服务，不同的微服务可以看成：政务中心、银行、法院、派出所、饭店
* “技术中台”：团队的研发力量体现
* “数据中台”：提供数据的入存管出的功能，负责让系统更加智慧
* “业务中台”：规范化、标准化做事的过程，提供标准流程和最佳实践，负责让系统更敏捷

## 黑话儿
* “talk is cheat,show me the code”：程序员之间的battle, 等于“就你写的那玩意儿，可别吹了”
* “屎山”：英文是shit mountain，指的是长期缺乏管理的代码库，程序员各写各的，导致别人维护起来的感觉就是在“shit mountain”中
* “冒烟儿跑”：指低质量的程序，就像一台已经着火冒着黑烟跑的列车，一旦停下来，没人知道会不会爆炸，没人敢保证停下来还能再启动起来
* “在吗？”：又要改需求了
* “回去再确认一下”：别说了，老子没想到
* “那个bug没问题啊，你再试试”：我刚偷偷改完这个bug

# 数据库

# OLTP 与 OLAP

## 概念

|  | OLTP | OLAP |
| --- | --- | --- |
| 对应系统 | 业务系统、合同、订单 | 决策支持系统 |
| 定位 | 产生数据 | 使用数据 |
| 工作负载 | 增、删、改 | 查询 |
| 系统衡量指标 | 事务吞吐量 | 查询响应速度qps |
| 数据库设计 | 3NF 或 BCNF | 星型、雪花模型 |  

OLAP分析分为关系型联机分析处理（ROLAP）、多维联机分析处理（MOLAP）两种

* ROLAP: 即关系型 OLAP，通过对原始明细数据实时聚合计算的方式来进行查询。比如 Presto，Impala 之类的 OLAP 引擎。

* MOLAP: 即多维型 OLAP，通过摄入时对原始明细数据进行预聚合加工处理，然后通过预聚合数据来进行查询。比如 Kylin，Druid 之类的 OLAP 引擎。

Hybird OLAP: 混合类型 OLAP。

## 关于ClickHouse的特性

ClickHouse 擅长:

* SQL 支持: 支持大部分 SQL 功能。
* 列式存储，数据压缩: 列式存储能够更加有利于 OLAP 聚合查询，同时也能大大提高数据压缩率。
* 多核(垂直扩展)，分布式处理(水平扩展): 使用多线程和多分片并行处理。
* 实时数据摄入: 数据可以实时批量摄入立即被查询
* 主键索引，二级索引: ClickHouse 主要采用了稀疏索引的方式做主键索引，minmax，set，ngrambf/tokenbf 等 Bloom Filter 去做二级索引

ClickHouse 不擅长:

* 没有高速，低延迟的更新和删除方法 
* 稀疏索引使得点查性能不佳
* 不支持事务

##  ClickHouse 为何会那么快

## ClickHouse 应用场景

* 实时数仓
* 实时日志分析，监控分析
* 用户行为分析，精细化运营分析: 日活，留存率分析，路径分析，有序漏斗转化率分析，Session 分析等


## ClickHouse的原理

* 当一个 SQL 传入服务器后，ClickHouse 将SQL 解析成 AST 语法树。

* 通过 Interpreter，将 AST 语法树转化成 QueryPlan，构建 Pipeline。这里 Interpreter 做的事情通常在别的数据库中，比如 Presto，会分成语义解析(元数据校验)，执行计划，执行计划优化等阶段。而在 ClickHouse 中这块代码耦合度相对比较高，个人觉得也是可以重构下的。

* 执行 Pipeline。 

## ClickHouse的技术poc清单

以下部分是确定可以实现的：

* 用户权限设置，比如对用户增删改查限制，直接对user赋予权限，角色赋予权限
* 库表的创建，调整，**TinyLog存储类型不支持add column操作**
* 从mysql同步数据到clickhouse
* clickhouse 抽取kafka
* oracle同步数据需要etl工具支持，或者使用flume

## 总结

* clichhouse是个olap数据库，擅长查询，不擅长读写
* ch保存的都是经过kv计算预处理过的**元数据**

## 可以落地的计划

* ClickHouse 容器化部署

容器化部署更高拥有更好的弹性伸缩能力，也能和其它的服务进行混合部署来节省成本

有些业务的导入数据量还是非常巨大的。但是其实查询量并不大，因为读写不分离，这时候导入数据量反而决定了集群的规模

将读写进行分离，写入部分通过 k8s 容器化技术临时构建集群来完成

* 在 ClickHouse 平台化

业务方易用性，多租户隔离，限流，熔断，监控报警，业务治理等方面进行更多地投入，特别是前期业务方还不多的时候，否则未来无论是平台侧还是业务方改造都是非常大的

* ClickHouse 更多的推广，更多业务的接入

用户行为分析，实时数仓，实时报表等业务， BI 平台支持 Presto 离线明细类报表和 Druid 实时预聚合报表，ClickHouse 实时明细类报表的引入，能够使得用户更加实时，方便地进行报表分析。

* 核心业务双链路

OLAP 的核心业务使用 Druid + ClickHouse 的双链路去实现。

Druid 还要再调研，据说有问题
